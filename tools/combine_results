#!/usr/bin/env python3

import argparse

def main(args=None):
    parser = argparse.ArgumentParser()
    parser.add_argument("-j", "--jsons", action="store", help="Name of the directory where JSON files are present")
    parser.add_argument("-t", "--target", action="store", help="Name of the target EoS")
    parser.add_argument("-r", "--reference", action="store", help="Name of the reference EoS")
    parser.add_argument("-o", "--output", action="store", help="Name of the output file")
    return parser

    def main(args=None):
        import os
        import json
        import numpy as np

    p = parser()
    args = p.parse_args()


    listdir = os.listdir(args.jsons)

    bf_dict = {}
    bf_array = np.array([])
    for jsonfile in listdir:
        with open(os.path.join(args.jsons, jsonfile), 'r') as f:
            this_data = json.load(f)
            bf_array = np.append(bf_array, this_data['bf_array'])

    bf_dict['bf'] = this_data['bf']
    bf_dict['bf_array'] = bf_array.tolist()
    bf_dict["ref_eos"] = args.reference
    bf_dict["target_eos"] = args.target

    with open(args.output, 'w') as f:
            json.dump(bf_dict, f, indent=2, sort_keys=True)

# if __name__ == "__main__":
#     main()
